<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ - ë…¼ë¦¬ìˆ˜í•™ í€´ì¦ˆ</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <!-- ì˜ì¡´ì„± ìŠ¤í¬ë¦½íŠ¸ë“¤ -->
    <script src="js/database.js"></script>
    <script src="data/questions.js"></script>
    <script src="data/additional-questions.js"></script>
    
    <script>
        const { useState, useEffect } = React;
        
        function SimpleTestApp() {
            const [status, setStatus] = useState('í…ŒìŠ¤íŠ¸ ì‹œì‘...');
            const [results, setResults] = useState([]);
            
            useEffect(() => {
                runTests();
            }, []);
            
            const runTests = async () => {
                const testResults = [];
                
                try {
                    // React í…ŒìŠ¤íŠ¸
                    if (typeof React !== 'undefined' && typeof ReactDOM !== 'undefined') {
                        testResults.push({ name: 'React', status: 'âœ… ì •ìƒ' });
                    } else {
                        testResults.push({ name: 'React', status: 'âŒ ì‹¤íŒ¨' });
                    }
                    
                    // ë°ì´í„°ë² ì´ìŠ¤ í…ŒìŠ¤íŠ¸
                    if (typeof MathQuizDatabase !== 'undefined') {
                        try {
                            const db = new MathQuizDatabase();
                            await new Promise(resolve => setTimeout(resolve, 500));
                            testResults.push({ name: 'ë°ì´í„°ë² ì´ìŠ¤', status: 'âœ… ì •ìƒ' });
                        } catch (error) {
                            testResults.push({ name: 'ë°ì´í„°ë² ì´ìŠ¤', status: 'âŒ ì˜¤ë¥˜: ' + error.message });
                        }
                    } else {
                        testResults.push({ name: 'ë°ì´í„°ë² ì´ìŠ¤', status: 'âŒ MathQuizDatabase ì—†ìŒ' });
                    }
                    
                    // ë¬¸ì œ ë°ì´í„° í…ŒìŠ¤íŠ¸
                    if (typeof questionsData !== 'undefined') {
                        const easyCount = questionsData.easy?.length || 0;
                        const mediumCount = questionsData.medium?.length || 0;
                        const hardCount = questionsData.hard?.length || 0;
                        testResults.push({ 
                            name: 'ë¬¸ì œ ë°ì´í„°', 
                            status: `âœ… ì‰¬ì›€:${easyCount}, ë³´í†µ:${mediumCount}, ì–´ë ¤ì›€:${hardCount}` 
                        });
                    } else {
                        testResults.push({ name: 'ë¬¸ì œ ë°ì´í„°', status: 'âŒ questionsData ì—†ìŒ' });
                    }
                    
                    setResults(testResults);
                    setStatus('í…ŒìŠ¤íŠ¸ ì™„ë£Œ');
                    
                } catch (error) {
                    setStatus('í…ŒìŠ¤íŠ¸ ì¤‘ ì˜¤ë¥˜: ' + error.message);
                    console.error('í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:', error);
                }
            };
            
            return React.createElement('div', {
                className: 'p-8 max-w-2xl mx-auto'
            }, [
                React.createElement('h1', {
                    key: 'title',
                    className: 'text-3xl font-bold mb-8 text-center text-purple-600'
                }, 'ğŸ§ª ê°„ë‹¨í•œ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸'),
                
                React.createElement('div', {
                    key: 'status',
                    className: 'mb-6 p-4 bg-blue-100 rounded-lg'
                }, [
                    React.createElement('strong', { key: 'status-label' }, 'ìƒíƒœ: '),
                    status
                ]),
                
                React.createElement('div', {
                    key: 'results',
                    className: 'space-y-3'
                }, results.map((result, index) =>
                    React.createElement('div', {
                        key: `result-${index}`,
                        className: 'p-3 bg-gray-50 border rounded-lg'
                    }, [
                        React.createElement('strong', { key: 'name' }, result.name + ': '),
                        result.status
                    ])
                )),
                
                React.createElement('div', {
                    key: 'actions',
                    className: 'mt-8 text-center space-x-4'
                }, [
                    React.createElement('button', {
                        key: 'retry',
                        onClick: runTests,
                        className: 'bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600'
                    }, 'ğŸ”„ ë‹¤ì‹œ í…ŒìŠ¤íŠ¸'),
                    
                    React.createElement('a', {
                        key: 'main',
                        href: 'index.html',
                        className: 'bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 inline-block'
                    }, 'ğŸ® ë©”ì¸ ê²Œì„'),
                    
                    React.createElement('a', {
                        key: 'debug',
                        href: 'debug.html',
                        className: 'bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600 inline-block'
                    }, 'ğŸ› ë””ë²„ê·¸ ëª¨ë“œ')
                ])
            ]);
        }
        
        // ì—ëŸ¬ ì²˜ë¦¬
        window.addEventListener('error', function(e) {
            console.error('ê¸€ë¡œë²Œ ì—ëŸ¬:', e.message, e.filename, e.lineno);
            document.body.innerHTML += `<div style="background:red;color:white;padding:10px;margin:10px;">
                ERROR: ${e.message}<br>
                File: ${e.filename}<br>
                Line: ${e.lineno}:${e.colno}
            </div>`;
        });
        
        // React ë Œë”ë§
        try {
            ReactDOM.render(
                React.createElement(SimpleTestApp),
                document.getElementById('root')
            );
        } catch (error) {
            console.error('React ë Œë”ë§ ì˜¤ë¥˜:', error);
            document.getElementById('root').innerHTML = `
                <div style="background:red;color:white;padding:20px;margin:20px;">
                    <h2>React ë Œë”ë§ ì‹¤íŒ¨</h2>
                    <p>${error.message}</p>
                    <p>ë¸Œë¼ìš°ì € ì½˜ì†”ì„ í™•ì¸í•´ì£¼ì„¸ìš”.</p>
                </div>
            `;
        }
    </script>
</body>
</html>